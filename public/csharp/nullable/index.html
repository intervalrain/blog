<!DOCTYPE html>
<html lang="zh-tw" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>[C#] Nullable 可空值類型 | Rain Hu&#39;s Workspace</title>
<meta name="keywords" content="C#, Nullable, 可空值">
<meta name="description" content="Introduction to Nullable in C#">
<meta name="author" content="Rain Hu">
<link rel="canonical" href="https://intervalrain.github.io/">
<meta name="google-site-verification" content="XYZabc">
<meta name="msvalidate.01" content="XYZabc">
<link crossorigin="anonymous" href="/assets/css/stylesheet.662816b9df27c772d2b97c5f5f6bf4f2c5531051a330015f0ad4135736d0e56a.css" integrity="sha256-ZigWud8nx3LSuXxfX2v08sVTEFGjMAFfCtQTVzbQ5Wo=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/images/rain.png">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/images/rain.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/images/rain.png">
<link rel="apple-touch-icon" href="http://localhost:1313/images/rain.png">
<link rel="mask-icon" href="http://localhost:1313/images/rain.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="zh-tw" href="http://localhost:1313/csharp/nullable/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.js" integrity="sha384-GxNFqL3r9uRJQhR+47eDxuPoNE7yLftQM8LcxzgS4HT73tp970WS/wV5p8UzCOmb" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>



<script async src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>

<script src="https://utteranc.es/client.js"
    repo="intervalrain.github.io"
    issue-term="pathname"
    label="Comment"
    theme="github-light"
    crossorigin="anonymous"
    async>
</script><meta property="og:url" content="http://localhost:1313/csharp/nullable/">
  <meta property="og:site_name" content="Rain Hu&#39;s Workspace">
  <meta property="og:title" content="[C#] Nullable 可空值類型">
  <meta property="og:description" content="Introduction to Nullable in C#">
  <meta property="og:locale" content="zh-tw">
  <meta property="og:type" content="article">
    <meta property="article:section" content="csharp">
    <meta property="article:published_time" content="2023-02-23T21:40:03+08:00">
    <meta property="article:modified_time" content="2023-02-23T21:40:03+08:00">
    <meta property="article:tag" content="C#">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="[C#] Nullable 可空值類型">
<meta name="twitter:description" content="Introduction to Nullable in C#">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Csharps",
      "item": "http://localhost:1313/csharp/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "[C#] Nullable 可空值類型",
      "item": "http://localhost:1313/csharp/nullable/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "[C#] Nullable 可空值類型",
  "name": "[C#] Nullable 可空值類型",
  "description": "Introduction to Nullable in C#",
  "keywords": [
    "C#", "Nullable", "可空值"
  ],
  "articleBody": "1. 簡寫 以後綴 ? 之前接在類型名稱後面，也就是 T? 可以視同為 Nullable 舉例來說，下列四個變數類型名稱完全等價： Nullable Nullable int? int32 2. 定義 Nullable 的核心程式碼為: public struct Nullable where struct // 類型約束為非空值類型 { private readonly T value; private readonly bool hasValue; public Nullable(T value) { this.value = value; this.hasValue = true; } public bool HasValue { get { return hasValue; } } public T Value { get { if (!hasValue) { threw new InvalidOperationException(); } return value; } } } 由於 Nullable 的空值定義為 hasValue == false, 故以下兩者為等價 int? x = new int?(); int? x = null; 3. 轉換 允許 T 到 Nullable 的隱式轉換 int x = 5; int? y = x; 允許 Nullable 到 T 的顯式轉換 int? x = 5; int y = (int)x; 通過填充 null 值擴展已有功能的過程稱為 提升 lifting。\nC# 允許對非可空類型 T 做運算子重載，但 Nullable 同時也會重載相同的運算子，稱為 提升運算子 lifting operator。\n可重載的運算子包含： 一元運算子： +, ++, -, --, !, ~, true, false 二元運算子： +, -, *, /, %, \u0026, |, ^, \u003e\u003e, \u003c\u003c 等價運算子： ==, != 關係運算子： \u003c, \u003e, \u003c=, \u003e= 提升運算子的規則： true 和 false 運算子不能被提升。 T 必須是非可空值，其運算子才能被提升。 對於等價運算子和關係運算子，原運算子的返回類型必須是 bool 類型 對於 Nullable 的 \u0026 與 | 運算子有單獨定義 提升運算子範例： int? nullInt = null; int? five = 5; int? four = 4; Console.WriteLine(-nullInt); // null Console.WriteLine(-five); // -5 Console.WriteLine(five + nullInt); // null Console.WriteLine(five + four); // 4 Console.WriteLine(four \u0026 nullInt); // null Console.WriteLine(four \u0026 five); // 4 Console.WriteLine(nullInt == nullInt); // true Console.WriteLine(five == five); // true Console.WriteLine(five == nullInt); // false Console.WriteLine(five == four); // false Console.WriteLine(four \u003c five); // true Console.WriteLine(nullInt \u003c five); // false Console.WriteLine(four \u003c nullInt); // false Console.WriteLine(nullInt \u003c nullInt); // false Console.WriteLine(nullInt \u003c= nullInt); // false 可空值邏輯真值表： x y x\u0026y x|y x^y !x true true true true false false true false false true true false true null null true null false false true false true true true false false false false false true false null false null null true null true null true null null null false false null null null null null null null null null 注意 C# 2中，比較操作的結果不能為 null\n在 SQL 中，比較中的兩者中若有一者為 null 則結果不能預期\n4. as 運算子 在 C# 2，as 除了可用於物件，也可用於可空值類型。 當原始引用的類型不匹配，或為 null 時，返回 null 值： public static void Main() { object[] obj = new object[]{ null, \"3\", '3', 3, 5.5 }; foreach (var o in obj) print(o); } public static void print(object o) { int? num = o as int?; Console.WriteLine(num.HasValue ? num : \"something\"); } // something // something // something // 3 // something 5. ?? 運算子 當 ?? 前非 null 時依原本的值代入，若為 null 則以 ?? 後的值代入。 int a = 5; int? b = 10; int? c = null; Console.WriteLine(\"a + b = {0}\", a + (b ?? 0)); // 15 Console.WriteLine(\"a + b = {0}\", a + (c ?? 0)); // 5 6. ?. 運算子 當 ?. 前為非 null 時，繼續往下做，可連續 List a = null; List b = default; List c = new List{ 1,3,5,7,9 }; Console.WriteLine(a?.Count); // Console.WriteLine(b?.Count); // Console.WriteLine(c?.Count); // 5 ",
  "wordCount" : "471",
  "inLanguage": "zh-tw",
  "datePublished": "2023-02-23T21:40:03+08:00",
  "dateModified": "2023-02-23T21:40:03+08:00",
  "author":{
    "@type": "Person",
    "name": "Rain Hu"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://localhost:1313/csharp/nullable/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Rain Hu's Workspace",
    "logo": {
      "@type": "ImageObject",
      "url": "http://localhost:1313/images/rain.png"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="Rain Hu&#39;s Workspace (Alt + H)">
                <img src="http://localhost:1313/images/rain.png" alt="" aria-label="logo"
                    height="35">Rain Hu&#39;s Workspace</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/search" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/aboutme" title="About me">
                    <span>About me</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/csharp/csharp" title="C#">
                    <span>C#</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/csindex" title="CS">
                    <span>CS</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/leetcode" title="LeetCode">
                    <span>LeetCode</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://localhost:1313/">首頁</a>&nbsp;»&nbsp;<a href="http://localhost:1313/csharp/">Csharps</a></div>
    <h1 class="post-title entry-hint-parent">
      [C#] Nullable 可空值類型
    </h1>
    <div class="post-description">
      Introduction to Nullable in C#
    </div>
    <div class="post-meta"><span title='2023-02-23 21:40:03 +0800 CST'>February 23, 2023</span>&nbsp;·&nbsp;3 分鐘&nbsp;·&nbsp;Rain Hu&nbsp;|&nbsp;<a href="https://github.com/intervalrain/intervalrain.github.io/tree/main/content//Csharp/nullable.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
  </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
            <summary accesskey="c" title="(Alt + C)">
                <span class="details">目錄</span>
            </summary>

            <div class="inner"><ul>
                    <li>
                        <a href="#1-%e7%b0%a1%e5%af%ab" aria-label="1. 簡寫">1. 簡寫</a></li>
                    <li>
                        <a href="#2-%e5%ae%9a%e7%be%a9" aria-label="2. 定義">2. 定義</a></li>
                    <li>
                        <a href="#3-%e8%bd%89%e6%8f%9b" aria-label="3. 轉換">3. 轉換</a></li>
                    <li>
                        <a href="#4-as-%e9%81%8b%e7%ae%97%e5%ad%90" aria-label="4. as 運算子">4. as 運算子</a></li>
                    <li>
                        <a href="#5--%e9%81%8b%e7%ae%97%e5%ad%90" aria-label="5. ?? 運算子">5. ?? 運算子</a></li>
                    <li>
                        <a href="#6--%e9%81%8b%e7%ae%97%e5%ad%90" aria-label="6. ?. 運算子">6. ?. 運算子</a>
                    </li>
                </ul>
            </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
         
         activeElement = elements[0];
         const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
         document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
     }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 && 
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
             const id = encodeURI(element.getAttribute('id')).toLowerCase();
             if (element === activeElement){
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
             } else {
                 document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
             }
         })
     }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;

        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;   
    }
</script>

  <div class="post-content"><h2 id="1-簡寫">1. 簡寫<a hidden class="anchor" aria-hidden="true" href="#1-簡寫">#</a></h2>
<ul>
<li>以後綴 <code>?</code> 之前接在類型名稱後面，也就是 <code>T?</code> 可以視同為 <code>Nullable&lt;T&gt;</code></li>
<li>舉例來說，下列四個變數類型名稱完全等價：
<ul>
<li><code>Nullable&lt;int&gt;</code></li>
<li><code>Nullable&lt;int32&gt;</code></li>
<li><code>int?</code></li>
<li><code>int32</code></li>
</ul>
</li>
</ul>
<h2 id="2-定義">2. 定義<a hidden class="anchor" aria-hidden="true" href="#2-定義">#</a></h2>
<ul>
<li>Nullable 的核心程式碼為:</li>
</ul>
<pre tabindex="0"><code class="language-Cs" data-lang="Cs">public struct Nullable&lt;T&gt; where struct  // 類型約束為非空值類型
{
    private readonly T value;
    private readonly bool hasValue;

    public Nullable(T value)
    {
        this.value = value;
        this.hasValue = true;
    }
    public bool HasValue { get { return hasValue; } }
    public T Value
    {
        get
        {
            if (!hasValue)
            {
                threw new InvalidOperationException();
            }
            return value;
        }
    }
}
</code></pre><ul>
<li>由於 Nullable 的空值定義為 <code>hasValue == false</code>, 故以下兩者為等價
<ul>
<li><code>int? x = new int?();</code></li>
<li><code>int? x = null;</code></li>
</ul>
</li>
</ul>
<h2 id="3-轉換">3. 轉換<a hidden class="anchor" aria-hidden="true" href="#3-轉換">#</a></h2>
<ul>
<li>允許 T 到 Nullable<T> 的隱式轉換</li>
</ul>
<pre tabindex="0"><code class="language-Cs" data-lang="Cs">int x = 5;
int? y = x;
</code></pre><ul>
<li>允許 Nullable<T> 到 T 的顯式轉換</li>
</ul>
<pre tabindex="0"><code class="language-Cs" data-lang="Cs">int? x = 5;
int y = (int)x;
</code></pre><ul>
<li>
<p>通過填充 null 值擴展已有功能的過程稱為 <strong>提升 lifting</strong>。</p>
</li>
<li>
<p>C# 允許對非可空類型 <code>T</code> 做運算子重載，但 <code>Nullable&lt;T&gt;</code> 同時也會重載相同的運算子，稱為 <strong>提升運算子 lifting operator</strong>。</p>
<ul>
<li>可重載的運算子包含：
<ul>
<li>一元運算子： <code>+</code>, <code>++</code>, <code>-</code>, <code>--</code>, <code>!</code>, <code>~</code>, <code>true</code>, <code>false</code></li>
<li>二元運算子： <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>%</code>, <code>&amp;</code>, <code>|</code>, <code>^</code>, <code>&gt;&gt;</code>, <code>&lt;&lt;</code></li>
<li>等價運算子： <code>==</code>, <code>!=</code></li>
<li>關係運算子： <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code></li>
</ul>
</li>
<li>提升運算子的規則：
<ul>
<li><code>true</code> 和 <code>false</code> 運算子不能被提升。</li>
<li><code>T</code> 必須是<strong>非可空值</strong>，其運算子才能被提升。</li>
<li>對於等價運算子和關係運算子，原運算子的返回類型必須是 <code>bool</code> 類型</li>
<li>對於 <code>Nullable&lt;bool&gt;</code> 的 <code>&amp;</code> 與 <code>|</code> 運算子有單獨定義</li>
</ul>
</li>
<li>提升運算子範例：</li>
</ul>
<pre tabindex="0"><code class="language-Cs" data-lang="Cs">int? nullInt = null;
int? five = 5;
int? four = 4;

Console.WriteLine(-nullInt);            // null
Console.WriteLine(-five);               // -5
Console.WriteLine(five + nullInt);      // null
Console.WriteLine(five + four);         // 4
Console.WriteLine(four &amp; nullInt);      // null
Console.WriteLine(four &amp; five);         // 4
Console.WriteLine(nullInt == nullInt);  // true
Console.WriteLine(five == five);        // true
Console.WriteLine(five == nullInt);     // false
Console.WriteLine(five == four);        // false
Console.WriteLine(four &lt; five);         // true
Console.WriteLine(nullInt &lt; five);      // false
Console.WriteLine(four &lt; nullInt);      // false
Console.WriteLine(nullInt &lt; nullInt);   // false
Console.WriteLine(nullInt &lt;= nullInt);  // false
</code></pre><ul>
<li>可空值邏輯真值表：
<table>
  <thead>
      <tr>
          <th>x</th>
          <th>y</th>
          <th>x&amp;y</th>
          <th>x|y</th>
          <th>x^y</th>
          <th>!x</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>true</td>
          <td>true</td>
          <td>true</td>
          <td>true</td>
          <td>false</td>
          <td>false</td>
      </tr>
      <tr>
          <td>true</td>
          <td>false</td>
          <td>false</td>
          <td>true</td>
          <td>true</td>
          <td>false</td>
      </tr>
      <tr>
          <td>true</td>
          <td>null</td>
          <td>null</td>
          <td><strong>true</strong></td>
          <td>null</td>
          <td>false</td>
      </tr>
      <tr>
          <td>false</td>
          <td>true</td>
          <td>false</td>
          <td>true</td>
          <td>true</td>
          <td>true</td>
      </tr>
      <tr>
          <td>false</td>
          <td>false</td>
          <td>false</td>
          <td>false</td>
          <td>false</td>
          <td>true</td>
      </tr>
      <tr>
          <td>false</td>
          <td>null</td>
          <td><strong>false</strong></td>
          <td>null</td>
          <td>null</td>
          <td>true</td>
      </tr>
      <tr>
          <td>null</td>
          <td>true</td>
          <td>null</td>
          <td><strong>true</strong></td>
          <td>null</td>
          <td>null</td>
      </tr>
      <tr>
          <td>null</td>
          <td>false</td>
          <td><strong>false</strong></td>
          <td>null</td>
          <td>null</td>
          <td>null</td>
      </tr>
      <tr>
          <td>null</td>
          <td>null</td>
          <td>null</td>
          <td>null</td>
          <td>null</td>
          <td>null</td>
      </tr>
  </tbody>
</table>
</li>
</ul>
</li>
<li>
<p>注意 C# 2中，比較操作的結果不能為 null</p>
</li>
<li>
<p>在 SQL 中，比較中的兩者中若有一者為 null 則結果不能預期</p>
</li>
</ul>
<h2 id="4-as-運算子">4. as 運算子<a hidden class="anchor" aria-hidden="true" href="#4-as-運算子">#</a></h2>
<ul>
<li>在 C# 2，<code>as</code> 除了可用於物件，也可用於可空值類型。</li>
<li>當原始引用的類型不匹配，或為 null 時，返回 null 值：</li>
</ul>
<pre tabindex="0"><code class="language-Cs" data-lang="Cs">public static void Main()
{
    object[] obj = new object[]{
        null,
        &#34;3&#34;,
        &#39;3&#39;,
        3,
        5.5
    };
    foreach (var o in obj) print(o);
}
public static void print(object o)
{
    int? num = o as int?;
    Console.WriteLine(num.HasValue ? num : &#34;something&#34;);
}
// something
// something
// something
// 3
// something
</code></pre><h2 id="5--運算子">5. ?? 運算子<a hidden class="anchor" aria-hidden="true" href="#5--運算子">#</a></h2>
<ul>
<li>當 <code>??</code> 前非 null 時依原本的值代入，若為 <code>null</code> 則以 <code>??</code> 後的值代入。</li>
</ul>
<pre tabindex="0"><code class="language-Cs" data-lang="Cs">int a = 5;
int? b = 10;
int? c = null;

Console.WriteLine(&#34;a + b = {0}&#34;, a + (b ?? 0));     // 15
Console.WriteLine(&#34;a + b = {0}&#34;, a + (c ?? 0));     // 5
</code></pre><h2 id="6--運算子">6. ?. 運算子<a hidden class="anchor" aria-hidden="true" href="#6--運算子">#</a></h2>
<ul>
<li>當 <code>?.</code> 前為非 null 時，繼續往下做，可連續</li>
</ul>
<pre tabindex="0"><code class="language-Cs" data-lang="Cs">List&lt;int&gt; a = null;
List&lt;int&gt; b = default;
List&lt;int&gt; c = new List&lt;int&gt;{ 1,3,5,7,9 };

Console.WriteLine(a?.Count);    //
Console.WriteLine(b?.Count);    //
Console.WriteLine(c?.Count);    // 5
</code></pre>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="http://localhost:1313/tags/c%23/">C#</a></li>
    </ul>

  </footer><script src="https://utteranc.es/client.js"
    repo="Reid00/hugo-blog-talks"
    issue-term="pathname"
    label="Comment"
    theme="github-light"
    crossorigin="anonymous"
    async>
</script>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="http://localhost:1313/">Rain Hu&#39;s Workspace</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = '複製';

        function copyingDone() {
            copybutton.innerHTML = '已複製！';
            setTimeout(() => {
                copybutton.innerHTML = '複製';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
